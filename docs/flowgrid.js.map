{"version":3,"file":"flowgrid.js","sources":["../src/config.js","../src/cache.js","../src/utils.js","../src/dragdrop.js","../src/event.js","../src/fg-container.vue","../src/fg-item.vue","../src/index.js"],"sourcesContent":["\n// 常量\nexport const CONSTANT = {\n\tTHROTTLE_TIME: 15,                              // 节流函数的间隔时间单位ms, FPS = 1000 / THROTTLE_TIME\n\tUSER_SELECT_NONE: 'fg-user-select-none',\t\t\t  // 绑定到body, 阻止拖拽过程中文本选中\n\tFG_CONTAINER: 'fg-container',                   // 拖拽容器classname\n\tFG_LAYOUT: 'fg-layout',                         // 拖拽容器的布局区classname\n\tFG_LAYOUT_DRAGGABLE: 'data-fg-draggable',       // 布局区拖拽属性\n\tFG_LAYOUT_RESIZABLE: 'data-fg-resizable',       // 布局区缩放属性\n\tFG_LAYOUT_INDEX: 'data-fg-index',               // 布局区编号\n\tFG_ITEM: 'fg-item',                             // 拖拽块classname\n\tFG_ITEM_ANIMATE: 'fg-item-animate',             // 拖拽块classname 动画效果\n\tFG_ITEM_CONTENT: 'fg-item-content',             // 拖拽块的展示内容区div的classname\n\tFG_ITEM_ZOOM_BAR: 'fg-zoom-bar',                // 拖拽块内部放大缩小div的classname\n\tFG_ITEM_ZOOM_BAR_ICO: 'fg-zoom-bar-ico',        // 拖拽块内部放大缩小div里面图标的classname\n\tFG_ITEM_DRAG_BAR: 'fg-drag-bar',                // 拖拽块可以进行拖拽div的classname\n\tFG_ITEM_DRAG_BAR_ICO: 'fg-drag-bar-ico',        // 拖拽块可以进行拖拽div里面图标的classname\n\tFG_ITEM_GRAG_DROP: 'fg-item-dragdrop',          // 正在拖拽的块classname\n\tFG_ITEM_PLACEHOLDER: 'fg-item-placeholder',     // 拖拽块的占位符\n\tFG_ITEM_DATA_ID: 'data-fg-id',                  // 拖拽块的数据标识id\n\tPLACEHOLDER: 'placeholder'                      // 占位符\n}\n\n// 全局配置\nexport const globalConfig = {\n\trow: 7,                                            // 网格布局的默认行,默认7行\n\tcol: 12,                                           // 网格布局的默认列,默认12列\n\tdistance: 5,                                       // 触发拖拽的拖拽距离,默认5px\n\tdraggable: true,                                   // 是否允许拖拽, 默认允许\n\tresizable: true,                                   // 是否允许缩放, 默认允许\n\tnodeMinW: 2,                                       // 节点块的最小宽度, 默认占2格\n\tnodeMinH: 2,                                       // 节点块的最小高度, 默认占2格\n\toverflow: 5,                                       // 当拖拽或缩放超出网格容器的溢出像素\n\tpadding: {                                         // 节点块之间的间距, 默认都为5px\n\t\ttop: 5,\n\t\tleft: 5,\n\t\tright: 5,\n\t\tbottom: 5\n\t},\n\tcellScale: {                                       // 单元格的宽高比例, 默认16:9\n\t\tw: 16,\n\t\th: 9\n\t},\n\taddNodeSize: {                                     // 添加节点的默认尺寸\n\t\tx: 0,\n\t\ty: 0,\n\t\tw: 2,\n\t\th: 2\n\t}\n}\n","// 缓存对象\nlet cache = {\n\tinit: function () {\n\t\tif (!this.arr) this.arr = [];\n\t},\n\tget: function (idx) {\n\t\t// 避免0的情况, if条件判断麻烦\n\t\treturn this.arr[idx - 1];\n\t},\n\tset: function (obj) {\n\t\tthis.arr.push(obj);\n\t\treturn this.index();\n\t},\n\tremove: function(index) {\n\t\tthis.arr.splice(index, 1);\n\t},\n\tindex: function () {\n\t\treturn this.arr.length;\n\t},\n\tlist: function() {\n\t\treturn this.arr;\n\t}\n};\n\nexport default cache;\n","\nimport {CONSTANT} from './config'\n\nlet utils = {\n\t// 节流函数\n\tthrottle: function (now) {\n\t\tlet time = new Date().getTime();\n\t\tthis.throttle = function (now) {\n\t\t\tif (now - time > CONSTANT.THROTTLE_TIME) {\n\t\t\t\ttime = now;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tthis.throttle(now);\n\t},\n\t// 查找DOM节点\n\tsearchUp: function (ele, type) {\n\t\tif (ele === document.body || ele === document) return undefined;   // 向上递归到顶就停\n\t\tif (ele.classList.contains(type)) return ele;\n\t\treturn this.searchUp(ele.parentNode, type);\n\t}\n}\n\nexport default utils;\n","\nimport {CONSTANT} from './config'\nimport utils from './utils'\n\n// 拖拽对象\nlet dragdrop = {\n\tisResize: false,            // 是否放大缩小\n\tdragNode: {                 // 拖拽节点的的关联数据\n\t\tid: undefined,          \t// 拖拽节点的id\n\t\tnode: null,             \t// 占位符节点的关联数据\n\t},\n\tdragElement: null,          // 拖拽的dom节点\n\tdragStart: function (event, offsetX, offsetY, ele) {\n\t\tvar classList = event.target.classList;\n\t\t// 取得网格对象\n\t\tvar flowgrid = this.flowgrid = cache.get(node);\n\t\t// 配置项, 禁用拖拽\n\t\tif (!flowgrid.opt.draggable) return;\n\t\t// 判断是否放大缩小\n\t\tif (classList.contains(CONSTANT.FG_ITEM_ZOOM_BAR)) {\n\t\t\tthis.isResize = true;\n\t\t}\n\t\tthis.dragElement = node;\n\t\t// 取得当前拖拽节点, 并替换当前拖拽节点id\n\t\tvar query = flowgrid.query(node.getAttribute(CONSTANT.FG_ITEM_DATA_ID));\n\t\tif (query) {\n\t\t\tthis.dragElement.className = CONSTANT.FG_ITEM + ' ' + CONSTANT.FG_ITEM_GRAG_DROP;\n\t\t\tthis.dragNode.id = query.node.id;\n\t\t\tthis.dragNode.node = query.node;\n\t\t\tthis.dragNode.node.id = CONSTANT.PLACEHOLDER;\n\t\t\t// 新增占位符\n\t\t\tvar element = flowgrid.elements[this.dragNode.node.id] = view.create(flowgrid, this.dragNode.node);\n\t\t\tflowgrid.opt.container.appendChild(element);\n\t\t}\n\t},\n\tdrag: function (event) {\n\t\tif (!this.dragNode.node) return;\n\t\tvar flowgrid = this.flowgrid,\n\t\t\topt = flowgrid.opt,\n\t\t\tcontainer = opt.container,\n\t\t\tcontainerOffset = view.getOffset(container),    // 取得容器偏移\n\t\t\t// 相对父元素的偏移坐标x,y\n\t\t\ttranslate = this.dragElement.style.transform,\n\t\t\tvalue = translate.replace(/translate.*\\(/ig, '').replace(/\\).*$/ig, '').replace(/px/ig, '').split(','),\n\t\t\tinfo = {\n\t\t\t\tcontainerX: containerOffset.left,\n\t\t\t\tcontainerY: containerOffset.top,\n\t\t\t\tcontainerW: container.clientWidth,\n\t\t\t\ttranslateX: value[0] * 1,\n\t\t\t\ttranslateY: value[1] * 1\n\t\t\t};\n\t\t// 赋初值\n\t\tthis.prevX || (this.prevX = event.pageX);\n\t\tthis.prevY || (this.prevY = event.pageY);\n\t\t// 计算位移\n\t\tinfo.dx = event.pageX - this.prevX;\n\t\tinfo.dy = event.pageY - this.prevY;\n\t\t// 保存当前坐标变成上一次的坐标\n\t\tthis.prevX = event.pageX;\n\t\tthis.prevY = event.pageY;\n\t\t// 转换坐标\n\t\tinfo.eventX = event.pageX - info.containerX;\n\t\tinfo.eventY = event.pageY - info.containerY;\n\t\t// 判断是不是放大缩小\n\t\tif (this.isResize) {\n\t\t\tthis.resize(event, opt, info, flowgrid);\n\t\t} else {\n\t\t\t// 计算偏移\n\t\t\tthis.eventOffsetX || (this.eventOffsetX = info.eventX - info.translateX);\n\t\t\tthis.eventOffsetY || (this.eventOffsetY = info.eventY - info.translateY);\n\t\t\tthis.changeLocation(event, opt, info, flowgrid);\n\t\t}\n\t},\n\tchangeLocation: function (event, opt, info, flowgrid) {\n\t\tvar node = this.dragNode.node,\n\t\t\tx = info.eventX - this.eventOffsetX,\n\t\t\ty = info.eventY - this.eventOffsetY;\n\t\t// 计算坐标\n\t\tthis.dragElement.style.cssText += ';transform: translate(' + x + 'px,' + y + 'px);';\n\t\t// 当前拖拽节点的坐标, 转换成对齐网格的坐标\n\t\tvar nodeX = Math.round(x / opt.cellW_Int);\n\t\tvar nodeY = Math.round(y / opt.cellH_Int);\n\t\t// 判断坐标是否变化\n\t\tif (node.x !== nodeX || node.y !== nodeY) {\n\t\t\tflowgrid.replaceNodeInArea(flowgrid.area, node);\n\t\t\tnode.x = nodeX;\n\t\t\tnode.y = nodeY;\n\t\t\tflowgrid.checkIndexIsOutOf(flowgrid.area, node, this.isResize);\n\t\t\tflowgrid.overlap(flowgrid.data, node, info.dx, info.dy, this.isResize);\n\t\t\tflowgrid.load();\n\t\t}\n\t},\n\tresize: function (event, opt, info, flowgrid) {\n\t\tvar node = this.dragNode.node,\n\t\t\tminW = node.minW * opt.cellW_Int - opt.padding.left - opt.padding.right,\n\t\t\tminH = node.minH * opt.cellH_Int - opt.padding.top - opt.padding.bottom,\n\t\t\teventW = info.eventX - info.translateX + opt.overflow,\n\t\t\teventH = info.eventY - info.translateY + opt.overflow,\n\t\t\tw = eventW,\n\t\t\th = eventH;\n\t\t// 判断最小宽\n\t\tif (eventW < minW)\n\t\t\tw = minW - opt.overflow;\n\t\t// 判断最小高\n\t\tif (eventH < minH)\n\t\t\th = minH - opt.overflow;\n\t\t// 判断最大宽\n\t\tif (eventW + info.translateX > info.containerW)\n\t\t\tw = info.containerW - info.translateX + opt.overflow;\n\t\t// 设置宽高\n\t\tthis.dragElement.style.cssText += ';width: ' + w + 'px; height: ' + h + 'px;';\n\t\t// 判断宽高是否变化\n\t\tvar nodeW = Math.ceil(w / opt.cellW_Int),\n\t\t\tnodeH = Math.ceil(h / opt.cellH_Int);\n\t\tif (node.w !== nodeW || node.h !== nodeH) {\n\t\t\tflowgrid.replaceNodeInArea(flowgrid.area, node);\n\t\t\tnode.w = nodeW;\n\t\t\tnode.h = nodeH;\n\t\t\tflowgrid.checkIndexIsOutOf(flowgrid.area, node, this.isResize);\n\t\t\tflowgrid.overlap(flowgrid.data, node, info.dx, info.dy, this.isResize);\n\t\t\tflowgrid.load();\n\t\t}\n\t},\n\tdragEnd: function (event) {\n\t\tif (!this.dragNode.node) return;\n\t\tvar flowgrid = this.flowgrid,\n\t\t\tnode = this.dragNode.node;\n\t\tnode.id = this.dragNode.id;\n\t\t// 替换占位符\n\t\tview.update(flowgrid, flowgrid.elements[node.id], node);\n\t\t// 清理临时样式(结束拖拽)\n\t\tthis.dragElement.className = CONSTANT.FG_ITEM + ' ' + CONSTANT.FG_ITEM_ANIMATE;\n\t\t// 清理临时变量\n\t\tthis.flowgrid = null;\n\t\tthis.isResize = false;\n\t\tthis.dragNode.id = undefined;\n\t\tthis.dragNode.node = null;\n\t\t// 清理临时坐标\n\t\tthis.prevX = undefined;\n\t\tthis.prevY = undefined;\n\t\tthis.eventOffsetX = undefined;\n\t\tthis.eventOffsetY = undefined;\n\t\t// 移除临时dom(占位符)\n\t\tview.remove(CONSTANT.PLACEHOLDER);\n\t\tdelete flowgrid.elements[CONSTANT.PLACEHOLDER];\n\t}\n}\n\nexport default dragdrop;\n","import {CONSTANT, globalConfig} from './config'\nimport utils from './utils'\nimport dragdrop from './dragdrop'\n\n// 事件处理对象\nlet handleEvent = {\n\tinit: function (isbind) {\n\t\tif (this.isbind) return;\n\t\tthis.isbind = isbind;\n\t\tthis.unbindEvent();\n\t\tthis.bindEvent();\n\t},\n\tdestroy: function () {\n\t\tthis.unbindEvent();\n\t},\n\tbindEvent: function () {\n\t\tdocument.addEventListener('mousedown', this.mouseDown, false);\n\t\tdocument.addEventListener('mousemove', this.mouseMove, false);\n\t\tdocument.addEventListener('mouseup', this.mouseUp, false);\n\t\tdocument.addEventListener('click', this.click, true);\n\t\tthis.isbind = true;\n\t},\n\tunbindEvent: function () {\n\t\tdocument.removeEventListener('mousedown', this.mouseDown, false);\n\t\tdocument.removeEventListener('mousemove', this.mouseMove, false);\n\t\tdocument.removeEventListener('mouseup', this.mouseUp, false);\n\t\tdocument.removeEventListener('click', this.click, true);\n\t\tthis.isbind = false;\n\t},\n\tmouseDown: function (event) {\n\t\tlet self = handleEvent;\n\t\t// 设置拖拽过程中禁用文本选中\n\t\tdocument.body.classList.add(CONSTANT.USER_SELECT_NONE);\n\t\t// 是否点击了拖拽节点\n\t\tlet ele = self.ele = utils.searchUp(event.target, CONSTANT.FG_ITEM);\n\t\tif (ele) {\n\t\t\t// 记录位置, 通过比较拖拽距离来判断是否是拖拽, 如果是拖拽则阻止冒泡. 不触发点击事件\n\t\t\tself.dragStart = true;\n\t\t\tself.distance = globalConfig.distance;\n\t\t\tself.distanceX = event.pageX;\n\t\t\tself.distanceY = event.pageY;\n\t\t\tself.offsetX = event.offsetX || 0;\n\t\t\tself.offsetY = event.offsetY || 0;\n\t\t}\n\t},\n\tmouseMove: function (event) {\n\t\tlet self = handleEvent;\n\t\tif (!self.ele) return;\n\t\tif (self.dragStart && self.isDrag(event)) {\n\t\t\tself.dragStart = false;\n\t\t\tdragdrop.dragStart(event, self.offsetX, self.offsetY, self.ele);\n\t\t\treturn;\n\t\t}\n\t\tutils.throttle(new Date().getTime()) && dragdrop.drag(event);\n\t},\n\tmouseUp: function (event) {\n\t\tdocument.body.classList.remove(CONSTANT.USER_SELECT_NONE);\n\t\tdragdrop.dragEnd(event);\n\t\t// 清理临时变量\n\t\tlet self = handleEvent;\n\t\tdelete self.distance;\n\t\tdelete self.distanceX;\n\t\tdelete self.distanceY;\n\t\tdelete self.offsetX;\n\t\tdelete self.offsetY;\n\t},\n\tclick: function (event) {\n\t\tlet self = handleEvent;\n\t\tif (self.dragStart === false) {\n\t\t\t// event.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tdelete self.dragStart\n\t\t}\n\t},\n\tisDrag: function (event) {\n\t\tvar self = handleEvent,\n\t\t\t\tdistanceX = Math.abs(event.pageX - self.distanceX || 0),\n\t\t\t\tdistanceY = Math.abs(event.pageY - self.distanceY || 0);\n\t\tif (self.distance < distanceX || self.distance < distanceY) {\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nexport default handleEvent;\n","<template>\n  <div class=\"fg-container\"\n       :fg-index=\"index\"\n       :class=\"{'fg-no-draggable': !opt.draggable, 'fg-no-resizable': !opt.resizable}\">\n    <div class=\"fg-layout\">\n      <slot></slot>\n      <div class=\"fg-item-dragdrop\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\n\n  import {globalConfig} from './config'\n  import cache from './cache'\n  import handleEvent from './event'\n  import drag from './dragdrop'\n\n  export default {\n    name: 'fg-container',\n    props: [\n      'setting',\n      'nodes'\n    ],\n    computed: {\n      opt: function () {\n        let options = Object.assign({}, globalConfig, this.setting || {});\n        this.computeCell(options);\n        return options;\n      }\n    },\n    data () {\n      return {\n        area: [],\n        index: 1,\n      }\n    },\n    methods: {\n      // 计算单元格\n      computeCell: function (opt) {\n        opt.cellW = opt.containerW / opt.col;\n        opt.cellH = opt.cellW / opt.cellScale.w * opt.cellScale.h;\n        opt.cellW_Int = Math.floor(opt.cellW);\n        opt.cellH_Int = Math.floor(opt.cellH);\n      },\n      init: function () {\n        // 初始化监听\n        handleEvent.init(true);\n        // 缓存对象\n        cache.init();\n        this.index = cache.set(this);\n        // 初始矩阵区域并布局\n        this.buildArea();\n        this.layout();\n      },\n      // 构建网格区域\n      buildArea: function () {\n        let max = this.getMaxRowAndCol();\n        for (let r = 0; r < max.row; r++) {\n          this.area[r] = new Array(max.col);\n        }\n        this.putNodes();\n      },\n      // 取得区域中的最大行和列\n      getMaxRowAndCol: function () {\n        let opt = this.opt;\n        let nodes = this.nodes;\n        let max = {\n          row: opt.row,\n          col: opt.col\n        };\n        if (nodes && nodes.length > 0) {\n          for (let n of nodes) {\n            if (n.y + n.h > max.row) {\n              max.row = n.y + n.h;\n            }\n            if (n.x + n.w > max.col) {\n              max.col = n.x + n.w;\n            }\n          }\n        }\n        return max;\n      },\n      // 将数据铺进网格布局\n      putNodes: function () {\n        let r, c, rlen, clen;\n        for (let node of this.nodes) {\n          for (r = node.y, rlen = node.y + node.h; r < rlen; r++) {\n            for (c = node.x, clen = node.x + node.w; c < clen; c++) {\n              this.area[r][c] = node.id;\n            }\n          }\n        }\n      },\n      // 自动扫描空位添加节点\n      getNodeCoord: function (node) {\n        let nodes = this.nodes;\n        let area = this.area;\n        if (nodes.length === 0) return node;\n        var r, c, maxCol = area[0].length;\n        for (r = 0; r < area.length; r = r + 1) {\n          node.y = r;\n          for (c = 0; c < area[0].length; c = c + 1) {\n            node.x = c;\n            if (node.x + node.w > maxCol) {\n              node.x = 0;\n            }\n            if (!this.collision(area, node))\n              return node;\n          }\n        }\n        node.x = 0;  // area区域都占满了, 另起一行\n        node.y = r;\n        return node;\n      },\n      // 碰撞检测, 从左到右, 从上到下\n      collision: function (area, node) {\n        for (let r = node.y; r < node.y + node.h; r++)\n          for (let c = node.x; c < node.x + node.w; c++)\n            if (area[r] && (area[r][c] || area[r][c] == 0))\n              return true;\n      },\n      // 流布局\n      layout: function () {\n        // 原理: 遍历数据集, 寻找节点上面是否有空行, 修改node.y, 进行上移.\n        for (let node of this.nodes) {\n          let y = this.findEmptyLine(node);\n          node.y > y && this.moveUp(node, y);\n        }\n      },\n      // 寻找空行, 扫描找到最接近顶部的空行是第几行\n      findEmptyLine: function (node) {\n        let r, c, cell, area = this.area;\n        for (r = node.y - 1; r >= 0; r--) {\n          for (c = node.x; c < node.x + node.w; c++) {\n            cell = area[r][c];\n            if (cell || cell == 0) {\n              return r + 1;\n            }\n          }\n        }\n        return 0;\n      },\n      // 上移\n      moveUp: function (node, newRow, newId) {\n        node.y = newRow;\n        newId && (node.id = newId)\n        for (let r = node.y; r < node.y + node.h; r++)\n          for (let c = node.x; c < node.x + node.w; c++)\n            this.area[r][c] = node.id;\n      }\n    },\n    created () {\n      // 早于fg-item的钩子mounted执行\n      this.init();\n    },\n    beforeUpdate () {\n      // 数据更新时重置区域, 并布局\n      this.buildArea();\n      this.layout();\n      //console.log(this);\n    },\n    updated () {\n      //console.log(this);\n    },\n    mounted () {\n      //console.log('mounted');\n    },\n    destroyed () {\n      handleEvent.destroy();\n    }\n  }\n</script>\n\n<style>\n\n  /* 拖拽过程中阻止文本选中 */\n  body.fg-user-select-none {\n    user-select: none !important;\n  }\n\n  /* 响应式 */\n  @media screen and (max-width: 767px) {\n    .fg-layout {\n      width: auto !important;\n      margin: 0 10px;\n    }\n\n    .fg-layout:after {\n      content: \"\";\n      clear: both;\n    }\n\n    .fg-layout .fg-item-zoom-bar {\n      display: none;\n    }\n\n    .fg-item {\n      position: static;\n      width: 100% !important;\n      height: auto !important;\n      float: left !important;\n      transform: translate(0, 0) !important;\n      margin-bottom: 10px;\n    }\n  }\n\n  .fg-container {\n    position: relative;\n    z-index: 1;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n  }\n\n  .fg-layout {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  .fg-layout.fg-no-resizable .fg-item-zoom-bar {\n    display: none;\n  }\n\n  .fg-layout.fg-no-draggable .fg-item,\n  .fg-layout.fg-no-resizable .fg-item {\n    cursor: default;\n  }\n\n  .fg-item {\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    position: absolute;\n    z-index: 10;\n    background-color: #8fee2b;\n  }\n\n  .fg-item-content {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  .fg-item-zoom-bar {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    height: 24px;\n    width: 24px;\n    overflow: hidden;\n    z-index: 2147483647;\n    cursor: se-resize;\n  }\n\n  .fg-item-zoom-bar:before {\n    content: \"\";\n    position: absolute;\n    z-index: 2147483647;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n  }\n\n  .fg-item-dragdrop {\n    box-shadow: 2px 2px 2px rgba(144, 142, 142, 0.6);\n    opacity: 0.8;\n    z-index: 2147483647;\n  }\n\n  .fg-item[data-fg-id=\"placeholder\"] {\n    background-color: #d3d3d3;\n    z-index: 1;\n  }\n\n  .fg-item-animate {\n    -webkit-transform: translate3d(0, 0, 0);\n    -webkit-backface-visibility: hidden;\n    -webkit-transform-style: preserve-3d;\n    transition: transform 0.2s, height 0.2s, width 0.2s;\n  }\n</style>\n","<template>\n  <div class=\"fg-item\" :style=\"itemStyle\" :fg-id=\"node.id\">\n    <div class=\"fg-item-content\">\n      <slot></slot>\n    </div>\n    <div class=\"fg-item-zoom-bar\" :fg-id=\"node.id\"></div>\n  </div>\n</template>\n\n<script>\n\n  import {CONSTANT} from './config'\n\n  export default {\n    name: 'fg-item',\n    props: [\n      'node', // {id:'2', x: 0, y: 0, w: 4, h: 4}\n      'index'\n    ],\n    computed: {\n      itemStyle: function () {\n        let opt = this.$parent.opt;\n        let node = this.node;\n        return {\n          transform: \"translate(\" + (node.x * opt.cellW_Int) + \"px,\" + (node.y * opt.cellH_Int) + \"px)\",\n          width: (node.w * opt.cellW_Int - opt.padding.left - opt.padding.right) + 'px',\n          height: (node.h * opt.cellH_Int - opt.padding.top - opt.padding.bottom) + 'px'\n        }\n      }\n    },\n    data () {\n      return {\n      }\n    },\n    mounted () {\n      // console.log(this.$parent.options);\n//       console.log('2222');\n    }\n  }\n</script>\n\n<style>\n</style>\n","import { version } from '../package.json';\nimport fgContainer from './fg-container.vue';\nimport fgItem from './fg-item.vue';\n\nexport default {\n\tversion,\n\tfgContainer,\n\tfgItem\n}\n"],"names":["CONSTANT","globalConfig","cache","arr","idx","obj","push","index","splice","length","utils","now","time","Date","getTime","throttle","THROTTLE_TIME","ele","type","document","body","undefined","classList","contains","searchUp","parentNode","dragdrop","event","offsetX","offsetY","target","flowgrid","get","node","opt","draggable","FG_ITEM_ZOOM_BAR","isResize","dragElement","query","getAttribute","FG_ITEM_DATA_ID","className","FG_ITEM","FG_ITEM_GRAG_DROP","dragNode","id","PLACEHOLDER","element","elements","view","create","container","appendChild","containerOffset","getOffset","style","transform","value","translate","replace","split","info","left","top","clientWidth","prevX","pageX","prevY","pageY","dx","dy","eventX","containerX","eventY","containerY","resize","eventOffsetX","translateX","eventOffsetY","translateY","changeLocation","x","y","cssText","nodeX","Math","round","cellW_Int","nodeY","cellH_Int","replaceNodeInArea","area","checkIndexIsOutOf","overlap","data","load","minW","padding","right","minH","bottom","eventW","overflow","eventH","w","h","containerW","nodeW","ceil","nodeH","update","FG_ITEM_ANIMATE","remove","handleEvent","isbind","unbindEvent","bindEvent","addEventListener","mouseDown","mouseMove","mouseUp","click","removeEventListener","self","add","USER_SELECT_NONE","dragStart","distance","distanceX","distanceY","isDrag","drag","dragEnd","stopPropagation","abs","options","Object","assign","setting","computeCell","cellW","col","cellH","cellScale","floor","init","set","buildArea","layout","max","getMaxRowAndCol","r","row","Array","putNodes","nodes","n","c","rlen","clen","maxCol","collision","findEmptyLine","moveUp","cell","newRow","newId","destroy","$parent"],"mappings":"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"}